---
import { Container } from "../common/Container";
import { Home, School, Tent, Smile, Building, PartyPopper } from "lucide-react";
import { Button } from "../common/Button";

interface AudienceItem {
  icon?: string | null;
  label: string;
}

interface Props {
  title: string;
  subtitle?: string | null;
  audiences: AudienceItem[] | null;
}

const { title, subtitle, audiences } = Astro.props;

const getIcon = (iconName: string | null | undefined, label: string) => {
  const key = (iconName || label).toLowerCase();

  if (key.includes("home")) return Home;
  if (key.includes("school") || key.includes("daycare")) return School;
  if (key.includes("tent") || key.includes("zone")) return Tent;
  if (key.includes("party") || key.includes("event")) return PartyPopper;
  if (key.includes("smile") || key.includes("therapy")) return Smile;
  if (key.includes("building") || key.includes("work")) return Building;

  return Smile; // Default
};
---

<section class="py-20 bg-secondary/30">
  <Container>
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold font-heading text-primary mb-4">{title}</h2>
      {subtitle && <p class="text-lg text-text-muted">{subtitle}</p>}
    </div>

    {
      audiences && (
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6 mb-12">
          {audiences.map((item) => {
            const IconComponent = getIcon(item.icon, item.label);
            return (
              <div class="flex flex-col items-center justify-center p-6 bg-white rounded-xl shadow-sm hover:shadow-md transition-all hover:-translate-y-1">
                <IconComponent
                  size={40}
                  className="text-primary mb-4"
                  strokeWidth={1.5}
                />
                <span class="font-medium text-text-main text-center">
                  {item.label}
                </span>
              </div>
            );
          })}
        </div>
      )
    }

    <div class="text-center">
      <Button variant="outline" size="lg">Learn More About Uses</Button>
    </div>
  </Container>
</section>
